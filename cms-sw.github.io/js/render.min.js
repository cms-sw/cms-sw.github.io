getMenuBar=function(a){var e=a.all_prefixes,t=$('<nav id="topNavBar" class="navbar navbar-primary" role="navigation">'),n=$('<div class="container-fluid">');t.append(n);var s=$('<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">');n.append(s);var l=$('<ul class="nav navbar-nav">');s.append(l);for(var r=0;r<e.length;r++)addDropDownList(l,e[r],a[e[r]]);return t},addDropDownList=function(a,e,t){var n=$('<li class="dropdown">');linkTittle=$('<a href="#" class="dropdown-toggle" data-toggle="dropdown">').text(e),linkTittle.append($('<b class="caret">')),n.append(linkTittle),a.append(n);var s=$('<ul class="dropdown-menu">');n.append(s);for(var l=0;l<t.length;l++){var r=t[l],p=$("<a>").text(r).attr("href","#"+r),i=$("<li>").append(p);p.click(function(a){a.preventDefault();var e=$(this).attr("href");$("#myTab a[href="+e+"]").tab("show")}),s.append(i),i=null}},add_qa_link_to_row=function(a,e,t){var n=$("<td>");a.append(n);var s="http://cmssdt.cern.ch/SDT/cgi-bin//newQA.py?arch="+e+"&release="+t,l=$("<a></a>").attr("href",s),r=$("<span></span>");l.append(r),r.attr("class","glyphicon glyphicon-search"),n.append(l)},get_tests_url=function(a,e,t,n){var s=e.split("/"),l="";return"utests"==a||"builds"==a?l="not-ready"==e?"http://cms-sw.github.io/scramDetail.html#"+t+";"+n:"https://cmssdt.cern.ch/SDT/cgi-bin/showBuildLogs.py/"+s[6]+"/"+s[7]+"/"+s[8]+"/"+s[9]+"/"+s[10]:"relvals"==a?l="not-ready"==e?"https://cms-sw.github.io/relvalLogDetail.html#"+t+";"+n:"https://cms-sw.github.io/relvalLogDetail.html#"+s[6]+";"+s[10]:"addons"==a&&(l="https://cmssdt.cern.ch/SDT/cgi-bin//showAddOnLogs.py/"+s[6]+"/"+s[7]+"/"+s[8]+"/"+s[9]+"/"+s[10]+"/addOnTests/"),l},get_result_tests=function(a,e){for(var t=0;t<e.length;t++)if(e[t].arch==a)return e[t]},add_tests_to_row=function(a,e,t,n,s){var l=$("<td>");if(e.append(l),0!=a.length){var r=null,p=null,i=null,o=get_result_tests(t,a);if(null!=o&&(r=o.passed,i=o.details,p=o.file),null!=r&&null!=p){var c="",d="See Details";if("utests"==n)"passed"==r?(c="label label-success",d="See Details"):"failed"==r?(c="label label-danger",d=i.num_fails+" Tests Failing"):(c="label label-default",d="Unknown");else if("builds"==n)if(incomplete="not-ready"==p,incomplete)c="label label-info",d="Not complete";else if("passed"==r)c="label label-success",d="See Details";else if("warning"==r)c="label label-warning",d=i.compWarning+" Warnings";else{c="label label-danger";var h=null!=i.compError?i.compError:0,m=null!=i.linkError?i.linkError:0,u=null!=i.miscError?i.miscError:0;d=h+m+u+" Errors"}else"relvals"==n?(c=r?"label label-success":"label label-danger",incomplete="not-ready"==p,incomplete?(c="label label-info",d="Not complete"):r?(c="label label-success",d="See Details"):(c="label label-danger",d="Pass: "+i.num_passed+" Fail: "+i.num_failed)):c=r?"label label-success":"label label-danger";var g=$("<span>");g.append($("<small>").text(d)),g.attr("class",c);var f=(p.split("/"),get_tests_url(n,p,t,s)),v=$("<a></a>").attr("href",f);v.append(g),l.append(v),e.append(l)}}},add_static_analyzer_link=function(a,e,t){if("not-found"!=e){var n="https://cmssdt.cern.ch/SDT/jenkins-artifacts/ib-static-analysis/"+t+"/"+e+"/llvm-analysis/index.html",s=$("<a></a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-eye-open"></span>')),s.append($("<span></span>").text(" Static Analyzer")),a.append(s),a.append($("<br>"));var l=$("<a></a>").attr("href",n.replace("llvm-analysis/index.html","reports/modules2statics.txt"));l.append($("<span></span>").text(" Modules to thread unsafe statics")),a.append(l),a.append($("<br>"));var r=$("<a></a>").attr("href",n.replace("llvm-analysis/index.html","reports/tlf2esd.txt"));r.append($("<span></span>").text(" Modules to thread unsafe EventSetup products")),a.append(r)}},add_hlt_tests_link=function(a,e,t){if("found"==e){var n="https://cmssdt.cern.ch/SDT/jenkins-artifacts/HLT-Validation/"+t,s=$("<a></a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-list-alt"></span>')),s.append($("<span></span>").text(" HLT Validation")),a.append(s),a.append($("<br>"))}},add_rv_exceptions_link=function(a,e,t){if(e){var n="http://cms-sw.github.io/relvalsExceptions.html#"+t,s=$("<a></a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-warning-sign"></span>')),s.append($("<span></span>").text(" Relvals Exceptions Summary")),a.append(s)}},get_rv_exceptions_link_rq=function(a){var e="http://cms-sw.github.io/relvalsExceptions.html#"+a,t=$("<a></a>").attr("href",e);return t.text("Relvals Exceptions Summary for "+a),t},addTagLink=function(a,e){var t=e.indexOf("-")>=0;if(isTopOfBranch=!t&&e.indexOf("X")>=0,t){var n="https://github.com/cms-sw/cmssw/tree/"+e,s=$("<a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-tag">')),s.append($("<span>").text(" IB Tag")),a.append(s)}else if(isTopOfBranch){var n="https://github.com/cms-sw/cmssw/commits/"+e,s=$("<a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-list">')),s.append($("<span>").text(" See Branch")),a.append(s)}else{var n="https://github.com/cms-sw/cmssw/releases/tag/"+e,s=$("<a>").attr("href",n);s.append($('<span class="glyphicon glyphicon-tag">')),s.append($("<span>").text(" Release")),a.append(s)}},addInProgressWarning=function(a){var e=$("<b>").text("This IB is currently being built"),t=$("<span>").attr("class","glyphicon glyphicon-hourglass");a.append(t),a.append(e),a.append($("<br>"))},write_comp_IB_table=function(a,e){var t=a.compared_tags.split("-->")[1];isTopOfBranch=-1==t.indexOf("-")&&t.indexOf("X")>=0;var n=$("<h3><b></b></h3>").text(t);isTopOfBranch&&n.text("Next IB:");var s=$('<table class="table table-condensed"></table>');s.attr("id",t),e.append(s);var l=$("<td>").append(n);a.inProgress&&addInProgressWarning(l,t),addTagLink(l,t),l.append($("<br>")),add_static_analyzer_link(l,a.static_checks,t),l.append($("<br>")),add_hlt_tests_link(l,a.hlt_tests,t),add_rv_exceptions_link(l,a.RVExceptions,t);var r=$("<tr>"),p=a.relvals,i=a.utests,o=a.addons,c=a.tests_archs,d=a.builds;if(l.attr("rowspan",c.length+1),r.append(l),s.append(r),0!=c.length){var h=$("<th>").text("Architectures");r.append(h);var m=$("<th>").text("Builds");r.append(m);var u=$("<th>").text("Unit Tests");r.append(u);var g=$("<th>").text("RelVals");r.append(g);var f=$("<th>").text("Other Tests");r.append(f);var v=$("<th>").text("Q/A");r.append(v);for(var _=0;_<c.length;_++){var b=$("<tr>");s.append(b);var x=$("<td>");fill_arch_cell(x,c[_],a.cmsdistTags,t),b.append(x),add_tests_to_row(d,b,c[_],"builds",t),add_tests_to_row(i,b,c[_],"utests",t),add_tests_to_row(p,b,c[_],"relvals",t),add_tests_to_row(o,b,c[_],"addons",t),add_qa_link_to_row(b,c[_],t)}}},fill_arch_cell=function(a,e,t,n){if(null==t[e])a.text(e);else{var s=t[e],l="IB/".concat(n,"/",e),r="ERR/".concat(n,"/",e),p=$("<a>");p.attr("href","https://github.com/cms-sw/cmsdist/commits/"+s);var i="",o=$("<small>");if("Not Found"==s)return void a.text(e);if(s!=l&&s!=r){i="Used same cmsdist tag as "+s.replace("IB/","").replace("/"+e,"");var c=s.split("/")[1],d=c.substring(c.lastIndexOf("_")+1,c.length),h=$("<a>").attr("href","#"+c).text("Patch from "+d);o.append(h)}else i="See cmsdist tag used for this build",o.text("Full Build");p.text(e),a.append(p),a.attr("data-toggle","tooltip").attr("data-placement","right").attr("title",i),a.append($("<br>")),a.append(o)}},write_merge_commit=function(a,e){for(var t=$("<li>"),n=a.number,s=" Automatic merge of ",l=0;l<a.brought_prs.length;l++)s+="#".concat(a.brought_prs[l]," ");var r="https://github.com/cms-sw/cmssw/commit/".concat(a.hash),p=$("<a>").attr("href",r);p.append($("<span>").text(n)),t.append(p);var i=$('<span class="glyphicon glyphicon-transfer">');t.append(i),t.append($("<span>").text(s)),e.append(t)},write_pr=function(a,e){var t=$("<li>"),n="#".concat(a.number),s=" from ".concat(a.author_login,": ",a.title),l=a.url,r=$("<a>").attr("href",l);if(r.append($("<span>").text(n)),t.append(r),a.from_merge_commit){var p=$('<span class="glyphicon glyphicon-transfer">');t.append(p)}t.append($("<span>").text(s)),e.append(t)},writeComparisonLinkGithub=function(a,e){var t=a.split("-->")[0],n=a.replace("-->","...");n="https://github.com/cms-sw/cmssw/compare/".concat(n);var s=$("<a>").attr("href",n);s.append($("<span>").text("See comparison with "+t+" on GitHub"));var l=$("<small>").append(s);e.append(l),e.append($("<br>")),e.append($("<br>"))},write_comparison=function(a,e){var t=a.compared_tags,n=a.merged_prs;if(write_comp_IB_table(a,e),0!=a.merged_prs.length){writeComparisonLinkGithub(t,e);for(var s=$("<ul>"),l=0;l<n.length;l++)n[l].is_merge_commit?write_merge_commit(n[l],s):write_pr(n[l],s);e.append(s)}else{var r=t.split("-->")[0],p=$("<ul>").append($("<li>").text("No new pull requests since "+r));e.append(p)}e.append($("<br>"))},paintComparisons=function(a){for(var e=$("#"+a.release_name),t=a.comparisons,n=t.length-1;n>=0;n--)write_comparison(t[n],e);checkHasToScroll(a.release_name)},checkHasToScroll=function(a){var e=document.location.toString();console.log("option2");var t=e.split("#")[1];if(void 0!=t){var n=t.substring(0,t.lastIndexOf("_")),s=n.charAt(n.length-1);("X"==s||"C"==s)&&a==n&&$("html, body").animate({scrollTop:$("#"+t).offset().top},1e3)}};
